{"version":3,"sources":["./src/app/userlogin/userlogin-routing.module.ts","./src/app/userlogin/userlogin.page.scss","./src/app/userlogin/userlogin.page.html","./src/app/userlogin/userlogin.page.ts","./src/app/userlogin/userlogin.module.ts"],"names":[],"mappings":"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","file":"userlogin-userlogin-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { UserloginPage } from './userlogin.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserloginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UserloginPageRoutingModule {}\n","export default \"ion-toolbar {\\n  --color: #ffffff;\\n  --background: #E21F2D;\\n  --ion-border-color: transparent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXHVzZXJsb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBQTtFQUNBLHFCQUFBO0VBQ0EsK0JBQUE7QUFDRiIsImZpbGUiOiJ1c2VybG9naW4ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXRvb2xiYXIge1xyXG4gIC0tY29sb3I6ICNmZmZmZmY7XHJcbiAgLS1iYWNrZ3JvdW5kOiAjRTIxRjJEO1xyXG4gIC0taW9uLWJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbn1cclxuIl19 */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n      <ion-back-button text=\\\"Назад\\\" class=\\\"text-white\\\"></ion-back-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <div class=\\\"cx cy\\\">\\n    <div class=\\\"ion-margin\\\">\\n      <div class=\\\"ion-padding-top\\\">\\n        <h1 class=\\\"bold\\\">Авторизация</h1>\\n      </div>\\n      <div class=\\\"ion-padding-top\\\">\\n        <div>Введите ваш почтовый адрес и пароль указанные при регистрации</div>\\n      </div>\\n      <ion-list lines=\\\"full\\\" class=\\\"ion-padding-top\\\">\\n        <ion-item>\\n          <ion-label position=\\\"fixed\\\">E-mail</ion-label>\\n          <ion-input type=\\\"email\\\" [(ngModel)]=\\\"email\\\" placeholder=\\\"введите ваш e-mail\\\"></ion-input>\\n        </ion-item>\\n        <ion-item>\\n          <ion-label position=\\\"fixed\\\">Пароль</ion-label>\\n          <ion-input type=\\\"password\\\" [(ngModel)]=\\\"password\\\" placeholder=\\\"придумайте пароль\\\"></ion-input>\\n        </ion-item>\\n      </ion-list>\\n      <div class=\\\"cx my-1\\\">\\n        <ion-button [disabled]=\\\"isSendLoginDisabled()\\\" class=\\\"bold eurasian-color\\\" color=\\\"none\\\" size=\\\"medium\\\" (click)=\\\"pendLogin()\\\">ПРОДОЛЖИТЬ</ion-button>\\n      </div>\\n      <div class=\\\"cx my-1\\\" *ngIf=\\\"loginPending\\\">\\n        <ion-spinner name=\\\"lines\\\"></ion-spinner>\\n      </div>\\n      <div class=\\\"ion-padding-top ion-text-center\\\">\\n        <div>Не помните пароль? Нажмите \\\"Восстановить пароль\\\"</div>\\n      </div>\\n      <div class=\\\"cx my-1\\\">\\n        <ion-button [disabled]=\\\"isRecoveryPasswordDisabled()\\\" class=\\\"bold eurasian-color\\\" color=\\\"none\\\" size=\\\"medium\\\" (click)=\\\"resetPassword()\\\">ВОССТАНОВИТЬ ПАРОЛЬ</ion-button>\\n      </div>\\n    </div>\\n  </div>\\n</ion-content>\\n\";","import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {PropsService} from '../props.service';\nimport {NavController, ToastController} from '@ionic/angular';\nimport {User} from '../user';\nimport {Verification} from '../verification';\n\n@Component({\n  selector: 'app-userlogin',\n  templateUrl: './userlogin.page.html',\n  styleUrls: ['./userlogin.page.scss'],\n})\nexport class UserloginPage implements OnInit, OnDestroy {\n\n  constructor(private props: PropsService, public toastController: ToastController, private nav: NavController) { }\n\n  email = '';\n  password = '';\n  loginPending = false;\n  events;\n\n  ngOnDestroy(): void {\n    this.events.unsubscribe();\n  }\n  ngOnInit() {\n    if (this.props.userId !== ''){\n      this.nav.navigateForward('');\n    }\n    this.events = this.props.event.subscribe(event => {\n      if (event === 'passwordHasBeenSend'){\n        this.loginPending = false;\n        this.toastController.create({\n          message: 'Пароль был отправлен вам на e-mail',\n          duration: 2000\n        }).then(toast => toast.present());\n      }\n      if (event === 'wrongLogin'){\n        this.loginPending = false;\n        this.toastController.create({\n          message: 'Пользоатель с таким e-mail не зарегистрирован',\n          duration: 2000\n        }).then(toast => toast.present());\n      }\n      if (event === 'wrongPassword'){\n        this.loginPending = false;\n        this.toastController.create({\n          message: 'Пароль введён неверно',\n          duration: 2000\n        }).then(toast => toast.present());\n      }\n      if (event === 'userReceived'){\n        // this.loginPending = false;\n        // this.toastController.create({\n        //   message: 'Авторизация прошла успешно.',\n        //   duration: 2000\n        // }).then(toast => toast.present());\n        this.nav.navigateForward('/tabs/tab4');\n      }\n    });\n  }\n\n  isSendLoginDisabled() {\n    const r = new RegExp('^[^@]+@[^.]+\\\\..*');\n    const errorInput = this.password.trim() === '' || !r.test(this.email);\n    return errorInput || this.loginPending;\n  }\n\n\n  resetPassword() {\n    this.props.recoverPassword(this.email);\n  }\n\n  pendLogin() {\n    this.loginPending = true;\n    this.props.pendLogin(this.email, this.password);\n  }\n\n  isRecoveryPasswordDisabled() {\n    const r = new RegExp('^[^@]+@[^.]+\\\\..*');\n    return !r.test(this.email);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UserloginPageRoutingModule } from './userlogin-routing.module';\n\nimport { UserloginPage } from './userlogin.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    UserloginPageRoutingModule\n  ],\n  declarations: [UserloginPage]\n})\nexport class UserloginPageModule {}\n"],"sourceRoot":"webpack:///"}